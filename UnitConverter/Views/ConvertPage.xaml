<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="UnitConverter.Views.ConvertPage"
             xmlns:vm="clr-namespace:UnitConverter.ViewModels"
             Shell.TabBarBackgroundColor="black"
             BackgroundImageSource="bg2.jpeg">

    <ContentPage.Resources>
        <ResourceDictionary>
            <Color x:Key="Color1">#FF6B35</Color>
            <Color x:Key="Color2">#4ECDC4</Color>
            <Color x:Key="Color3">#FFD166</Color>
            <Color x:Key="Color4">#EF476F</Color>
            <Color x:Key="Color5">#06D6A0</Color>
            <Color x:Key="Color6">#118AB2</Color>
            <Color x:Key="Color7">#073B4C</Color>
            <Color x:Key="Color8">#7209B7</Color>
            <Color x:Key="Color9">#3A86FF</Color>

            <LinearGradientBrush x:Key="Gradient1" StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#FFD166" Offset="0.0" />
                <GradientStop Color="#FFB347" Offset="1.0" />
            </LinearGradientBrush>

            <Style TargetType="Frame" x:Key="CardFrame">
                <Setter Property="CornerRadius" Value="18" />
                <Setter Property="Padding" Value="14" />
                <Setter Property="HasShadow" Value="True" />
                <Setter Property="BackgroundColor" Value="#FFFFFF" />
                <Setter Property="Margin" Value="6,8" />
            </Style>

            <Style TargetType="Label" x:Key="HeaderLabel">
                <Setter Property="FontSize" Value="24" />
                <Setter Property="FontAttributes" Value="Bold" />
                <Setter Property="TextColor" Value="{StaticResource Color8}" />
                <Setter Property="HorizontalTextAlignment" Value="Center" />
            </Style>

            <Style TargetType="Picker" x:Key="Pickers">
                <Setter Property="HeightRequest" Value="48" />
                <Setter Property="BackgroundColor" Value="#FFF9F9" />
                <Setter Property="HorizontalOptions" Value="Fill" />
                <Setter Property="FontFamily" Value="GorditasRegular"/>
            </Style>

            <Style TargetType="Entry" x:Key="BigEntry">
                <Setter Property="FontSize" Value="36" />
                <Setter Property="HorizontalTextAlignment" Value="Center" />
                <Setter Property="HeightRequest" Value="72" />
                <Setter Property="BackgroundColor" Value="#FFFDFD" />
                <Setter Property="PlaceholderColor" Value="#666666" />
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid RowDefinitions="Auto, Auto, Auto, Auto" Padding="18, 0" RowSpacing="8">

        <VerticalStackLayout HorizontalOptions="Start" Margin="0,10,0,55">
            <ImageButton x:Name="BackButton"
                         Clicked="BackButton_Clicked"
                         Source="arrowback.png"
                         HeightRequest="30"
                         WidthRequest="30"/>
        </VerticalStackLayout>

        <Label Grid.Row="1"
               Text="{Binding ConvertionName}"
               Style="{StaticResource HeaderLabel}"
               VerticalOptions="Center" />

        <Frame Grid.Row="2"
               Style="{StaticResource CardFrame}"
               BorderColor="#FFE6E6"
               BackgroundColor="#FFFFFF">
            <Grid RowDefinitions="Auto, Auto" ColumnDefinitions="*, Auto" RowSpacing="10">

                <StackLayout Grid.Column="0" Spacing="10">
                    <Label Text="From" FontSize="18" FontAttributes="Bold" TextColor="{StaticResource MutedText}" />
                    <Entry Style="{StaticResource BigEntry}"
                           Placeholder="0"
                           Text="{Binding Input}"
                           FontFamily="GorditasRegular"
                           Keyboard="Numeric"
                           x:Name="InputEntry"
                           TextChanged="InputEntry_TextChanged"/>
                </StackLayout>

                <Grid Grid.Row="1" Grid.ColumnSpan="2" Margin="0,6,0,0" HorizontalOptions="Center">
                    <Picker Grid.Column="0"
                            Title="Unit"
                            ItemsSource="{Binding Units}"
                            HorizontalTextAlignment="Center"
                            x:Name="Fromunit"
                            SelectedIndexChanged="Picker_SelectedIndexChanged"                            
                            SelectedItem="{Binding FromUnit}"
                            FontAttributes="Bold"
                            FontSize="20"
                            Style="{StaticResource Pickers}" />
                </Grid>

            </Grid>
        </Frame>

        <Frame Grid.Row="3"
               Style="{StaticResource CardFrame}"
               BorderColor="#FFEDE6"
               BackgroundColor="#FFFDF8">
            <VerticalStackLayout Spacing="12">
                <Label Text="Result" FontSize="18" FontAttributes="Bold" TextColor="{StaticResource MutedText}" />

                <Grid ColumnDefinitions="*, Auto" VerticalOptions="Center" Padding="6">
                    <Label Text="{Binding Result, StringFormat='{0:N2}'}"
                           FontSize="30"
                           FontAttributes="Bold"
                           VerticalOptions="Center"
                           HorizontalOptions="Start"
                           TextColor="{StaticResource PrimaryColor}" />
                </Grid>

                <BoxView HeightRequest="1" BackgroundColor="#FFF1F1" />
                <Grid ColumnDefinitions="*" ColumnSpacing="10" Margin="0,6,0,0" HorizontalOptions="Center">
                    <Picker Grid.Column="0"
                            Title="Unit"
                            ItemsSource="{Binding Units}"
                            SelectedItem="{Binding ToUnit}"
                            x:Name="Tounit"
                            SelectedIndexChanged="Picker_SelectedIndexChanged"
                            HorizontalTextAlignment="Center"
                            FontAttributes="Bold"
                            FontSize="20"
                            Style="{StaticResource Pickers}" />
                </Grid>
            </VerticalStackLayout>
        </Frame>

    </Grid>
</ContentPage>